{
  "version": 3,
  "sources": ["../../../@strapi/admin/admin/src/features/Notifications.tsx"],
  "sourcesContent": ["import * as React from 'react';\n\nimport { Alert, AlertVariant, Link, Box } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { Toaster, toast } from 'sonner';\n\ninterface NotificationLink {\n  label: string;\n  target?: string;\n  url: string;\n}\n\ninterface NotificationConfig {\n  blockTransition?: boolean;\n  link?: NotificationLink;\n  message?: string;\n  onClose?: () => void;\n  timeout?: number;\n  title?: string;\n  type?: 'info' | 'warning' | 'danger' | 'success';\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Context\n * -----------------------------------------------------------------------------------------------*/\n\ninterface NotificationsContextValue {\n  /**\n   * Toggles a notification, wrapped in `useCallback` for a stable identity.\n   */\n  toggleNotification: (config: NotificationConfig) => void;\n}\n\nconst NotificationsContext = React.createContext<NotificationsContextValue>({\n  toggleNotification: () => {},\n});\n\n/* -------------------------------------------------------------------------------------------------\n * Provider\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @internal\n * @description exposes the `NotificationsContext` to its children and renders notifications\n */\nconst NotificationsProvider = ({ children }: { children: React.ReactNode }) => {\n  const toggleNotification = React.useCallback(\n    ({ type, message, link, timeout, blockTransition, onClose, title }: NotificationConfig) => {\n      toast.custom(\n        (id) => {\n          return (\n            <Box width=\"50rem\" maxWidth=\"100%\">\n              <Notification\n                type={type}\n                message={message}\n                title={title}\n                link={link}\n                clearNotification={() => {\n                  toast.dismiss(id);\n                  onClose?.();\n                }}\n              />\n            </Box>\n          );\n        },\n        { duration: blockTransition ? Infinity : timeout }\n      );\n    },\n    []\n  );\n\n  const value = React.useMemo(() => ({ toggleNotification }), [toggleNotification]);\n\n  return (\n    <>\n      <Toaster position=\"top-center\" />\n      <NotificationsContext.Provider value={value}>{children}</NotificationsContext.Provider>\n    </>\n  );\n};\n\ninterface NotificationProps extends Omit<NotificationConfig, 'blockTransition' | 'timeout'> {\n  clearNotification: () => void;\n}\n\nconst Notification = ({\n  clearNotification,\n  link,\n  message,\n  onClose,\n  title,\n  type,\n}: NotificationProps) => {\n  const { formatMessage } = useIntl();\n\n  const getVariant = (): AlertVariant => {\n    switch (type) {\n      case 'info':\n        return 'default';\n      case 'danger':\n        return 'danger';\n      case 'warning':\n        return 'warning';\n      default:\n        return 'success';\n    }\n  };\n\n  return (\n    <Alert\n      action={\n        link ? (\n          <Link href={link.url} isExternal>\n            {link.label}\n          </Link>\n        ) : undefined\n      }\n      onClose={() => {\n        onClose?.();\n        clearNotification();\n      }}\n      closeLabel={formatMessage({\n        id: 'global.close',\n        defaultMessage: 'Close',\n      })}\n      title={title}\n      variant={getVariant()}\n    >\n      {message}\n    </Alert>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Hook\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * @preserve\n * @description Returns an object to interact with the notification\n * system. The callbacks are wrapped in `useCallback` for a stable\n * identity.\n *\n * @example\n * ```tsx\n * import { useNotification } from '@strapi/strapi/admin';\n *\n * const MyComponent = () => {\n *  const { toggleNotification } = useNotification();\n *\n *  return <button onClick={() => toggleNotification({ message: 'Hello world!' })}>Click me</button>;\n */\nconst useNotification = () => React.useContext(NotificationsContext);\n\nexport { NotificationsProvider, useNotification };\nexport type { NotificationConfig, NotificationsContextValue };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAiCA,IAAMA,uBAA6BC,oBAAyC;EAC1EC,oBAAoB,MAAO;EAAA;AAC7B,CAAA;AAUMC,IAAAA,wBAAwB,CAAC,EAAEC,SAAQ,MAAiC;AACxE,QAAMF,qBAA2BG,kBAC/B,CAAC,EAAEC,MAAMC,SAASC,MAAMC,SAASC,iBAAiBC,SAASC,MAAK,MAAsB;AACpFC,UAAMC,OACJ,CAACC,OAAAA;AACC,iBACEC,wBAACC,KAAAA;QAAIC,OAAM;QAAQC,UAAS;QAC1B,cAAAH,wBAACI,cAAAA;UACCd;UACAC;UACAK;UACAJ;UACAa,mBAAmB,MAAA;AACjBR,kBAAMS,QAAQP,EAAAA;AACdJ;UACF;;;OAKR;MAAEY,UAAUb,kBAAkBc,WAAWf;IAAQ,CAAA;EAErD,GACA,CAAA,CAAE;AAGJ,QAAMgB,QAAcC,cAAQ,OAAO;IAAExB;EAAmB,IAAI;IAACA;EAAmB,CAAA;AAEhF,aACEyB,yBAAAC,6BAAA;;UACEZ,wBAACa,SAAAA;QAAQC,UAAS;;UAClBd,wBAAChB,qBAAqB+B,UAAQ;QAACN;QAAerB;;;;AAGpD;AAMA,IAAMgB,eAAe,CAAC,EACpBC,mBACAb,MACAD,SACAI,SACAC,OACAN,KAAI,MACc;AAClB,QAAM,EAAE0B,cAAa,IAAKC,QAAAA;AAE1B,QAAMC,aAAa,MAAA;AACjB,YAAQ5B,MAAAA;MACN,KAAK;AACH,eAAO;MACT,KAAK;AACH,eAAO;MACT,KAAK;AACH,eAAO;MACT;AACE,eAAO;IACX;EACF;AAEA,aACEU,wBAACmB,OAAAA;IACCC,QACE5B,WACEQ,wBAACqB,MAAAA;MAAKC,MAAM9B,KAAK+B;MAAKC,YAAU;MAC7BhC,UAAAA,KAAKiC;IAENC,CAAAA,IAAAA;IAEN/B,SAAS,MAAA;AACPA;AACAU,wBAAAA;IACF;IACAsB,YAAYX,cAAc;MACxBjB,IAAI;MACJ6B,gBAAgB;IAClB,CAAA;IACAhC;IACAiC,SAASX,WAAAA;IAER3B,UAAAA;;AAGP;AAqBMuC,IAAAA,kBAAkB,MAAYC,iBAAW/C,oBAAAA;",
  "names": ["NotificationsContext", "createContext", "toggleNotification", "NotificationsProvider", "children", "useCallback", "type", "message", "link", "timeout", "blockTransition", "onClose", "title", "toast", "custom", "id", "_jsx", "Box", "width", "maxWidth", "Notification", "clearNotification", "dismiss", "duration", "Infinity", "value", "useMemo", "_jsxs", "_Fragment", "Toaster", "position", "Provider", "formatMessage", "useIntl", "getVariant", "Alert", "action", "Link", "href", "url", "isExternal", "label", "undefined", "closeLabel", "defaultMessage", "variant", "useNotification", "useContext"]
}
